diff --git a/electron-app/scripts/package.js b/electron-app/scripts/package.js
index 87a59709..4eff13c6 100644
--- a/electron-app/scripts/package.js
+++ b/electron-app/scripts/package.js
@@ -9,29 +9,34 @@ async function run() {
   const electronVersion =
     require('../package.json').devDependencies['electron'];
   const platform = electronPlatform();
-  const version = await getVersion();
+  const version = '@version@-nixpkgs';
   /** @type {string|unknown} */
   const cliVersion = require('../../arduino-ide-extension/package.json')
     .arduino['arduino-cli'].version;
   const artifactName = await getArtifactName(version);
   const args = [
+    '--dir',
+    '-c.asar',
+    'true',
+    '-c.asarUnpack',
+    '**/*.node',
     '--publish',
     'never',
     '-c.electronVersion',
-    electronVersion.slice(1), // removes the leading ^ from the version. TODO: user `semver` to clean it.
+    '@electron_version@',
+    '-c.electronDist',
+    '@electron_dist@',
     '-c.extraMetadata.version',
     version,
     // overrides the `name` in the `package.json` to keep the `localStorage` location. (https://github.com/arduino/arduino-ide/pull/2144#pullrequestreview-1554005028)
     '-c.extraMetadata.name',
     'arduino-ide',
-    `-c.${platform}.artifactName`,
-    artifactName,
     '-c.extraMetadata.theia.frontend.config.appVersion',
     version,
     '-c.extraMetadata.theia.frontend.config.cliVersion',
     typeof cliVersion === 'string' ? cliVersion : '',
     '-c.extraMetadata.theia.frontend.config.buildDate',
-    new Date().toISOString(),
+    '@build_date@',
     // when running in development mode, the main entry is a JS module generated by Theia. In the final application it's a custom module with the file logger.
     '-c.extraMetadata.main',
     './arduino-ide-electron-main.js',
